{% extends 'base.html.twig' %}
{% block title %}

	{% trans %}My Protocol applications{% endtrans %}
{% endblock  %}

{% block body %}

	<div class="card card-custom gutter-b my-0">
		<div class="card-header">
			<div class="card-title">
				<h3 class="card-label">{% trans %}My Protocol applications{% endtrans %}
				</h3>
			</div>
		</div>
		<div class="card-body">
			<div class="example-preview">
				<ul class="nav nav-tabs" id="myTab" role="tablist">
					<li class="nav-item">
						<a class="nav-link active" id="home-tab" data-toggle="tab" href="#home">
							<span class="nav-icon">
								<i class="fa fa-calendar"></i>
							</span>
							<span class="nav-text">
								{% trans %}All Active{% endtrans %}

								{% if applications|length>0%}

									<span class="label label-sm label-primary mr-2">{{applications|length}}</span>
									{% else %}

								{% endif %}
							</span>


						</a>
					</li>
					<li class="nav-item">
						<a class="nav-link " id="profile-tab" data-toggle="tab" href="#profile" aria-controls="profile">
							<span class="nav-icon">
								<i class="fa fa-table"></i>
							</span>
							<span class="nav-text" > {% trans %}Archived applications{% endtrans %}
								{# <span class="label label-sm label-danger mr-2">{{  closeds|length}}</span> #}
							</span>
						</a>
					</li>

				</ul>
				<div class="tab-content mt-5" id="myTabContent">
					<div class="tab-pane fade active show" id="home" role="tabpanel" aria-labelledby="home-tab">
						{# <div class="table-responsive"> #}
							{% if applications|length>0%}

							<table class="table table-separate table-head-custom table-checkable dataTable no-footer dtr-inline collapsed" id="kt_datatable_2" role="grid" aria-describedby="kt_datatable_2_info" 	>
									<thead>
										<tr>

											<th>#</th>
											<th>Title</th>
											<th>Sent at</th>
											{# <th>Review due date</th> #}
											<th>Status</th>
											<th>Last Updated </th>
											<th>Meeting </th>
											<th>Action</th>
										</tr>
									</thead>
									<tbody>
										{% for application in applications %}
							<tr>
								<td nowrap='nowrap'>
									{# <label class="checkbox checkbox-single">
										<input type="checkbox" name="check[]" class="checkbox">
										<span></span>
									</label> #}
									{{loop.index}}
								</td>
								<td>{{ application.title }}</td>
								
								<td>{{ application.createdAt ? application.createdAt|date('h:i d/m/y ') : '' }}</td>
								{# <td>{{ application.startDate ? application.startDate|date('d/m/y ') : '' }}-{{ application.endDate ? application.endDate|date('d/m/y ') : '' }}</td> #}
								
								<td>
									{% if application.meeting %}
										{{application.meeting.status }}
									{% endif %}
								</td>
								<td>{{ application.updatedAt ? application.updatedAt|date('h:i d/m/y ') : '' }}</td>

								<td>{{ application.meeting|length }}</td>
								<td nowrap="nowrap">

									<a href="{{ path('app_history', {'id': application.id}) }}" class='btn btn-light-primary btn-sm'>history</a>
									<a href="{{ path('application_show', {'id': application.id}) }}" class='btn btn-light-success btn-sm'>show</a>
									<a href="{{ path('application_edit', {'id': application.id}) }}" class='btn btn-light-danger btn-sm'>edit</a>
								</td>
							</tr>
						{% else %}
							<tr>
								<td colspan="9">no records found</td>
							</tr>
						{% endfor %}
									</tbody>
								</table>
							{% endif %}

						{# </div> #}
					</div>
					<div class="tab-pane fade " id="profile" role="tabpanel" aria-labelledby="profile-tab">
						<div class="table-responsive">
							 
						</div>
					</div>
					<div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab">Tab content 3</div>
				</div>
			</div>
		</div>
	</div>
{% endblock %}
